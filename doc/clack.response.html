<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Clack.Response</title>
  <link rel="stylesheet" href="./main.css" type="text/css" media="screen, tv, print" charset="UTF-8" />
</head>
<body>

<div class="container">

<h1>Clack.Response - Portable HTTP Response object for Clack response. </h1><h2>SYNOPSIS</h2><pre><code>(defvar res nil)  
 
(setf res (make-response 200))  
(setf res (make-response 200 '(:content-type "text/html")))  
(setf res (make-response 200 '(:content-type "text/html") '("aiueo")))  
 
;; Access each fields  
(status res)  
;;=&gt; 200  
(headers res)  
;;=&gt; (:content-type "text/html")  
(headers res :content-type)  
;;=&gt; "text/html"  
(body res)  
;;=&gt; ("aiueo")  
 
;; Set to each fields  
(setf (status res) 304)  
(setf (headers res :content-type) "text/plain")  
(setf (body res) '("moved"))  
(setf (body res) "moved") ;; string also allowed </code></pre><h2>DESCRIPTION</h2><p>Clack.Response allows you a way to create Clack response. </p><h2>AUTHOR</h2><ul><li>Eitarow Fukamachi (e.arrows@gmail.com)</li></ul>

<h2>EXTERNAL SYMBOLS</h2>

<div class="symbol">
  <ul>

<li>
  Class: <strong>&lt;response&gt;</strong> inherits (standard-object)

<pre>
  Portable HTTP Response object for Clack response.
</pre>

<dl>

<dt><strong>status</strong> Accessor: status</small></dt>


<dt><strong>headers</strong></small></dt>


<dt><strong>body</strong> Reader: body</small></dt>


<dt><strong>set-cookies</strong></small></dt>


</dl>

</li>

<li>
  Method: <strong>initialize-instance</strong>
[(res &lt;response&gt;) &amp;key]


</li>

<li>
  Function: <strong>make-response</strong>
[&amp;optional status headers body]

<pre>
  A synonym for (make-instance '<response> ...).
Create a <response> instance.
</pre>


</li>

<li>
  Method: <strong>headers</strong>
[(res &lt;response&gt;) &amp;optional name]

<pre>
  Get whole of headers or header value of given name.

Example:
  (headers res)
  ;;=> (:content-type "text/plain")
  (headers res :content-type)
  ;;=> "text/plain"
</pre>


</li>

<li>
  Method: <strong>(setf headers)</strong>
[value (res &lt;response&gt;) &amp;optional name]

<pre>
  Set headers.

Example:
  (setf (headers res) '(:content-type "text/html"))
  (setf (headers res :content-type) "text/html")
</pre>


</li>

<li>
  Method: <strong>push-header</strong>
[(res &lt;response&gt;) name value]

<pre>
  Push the given header pair into response headers.
Example: (push-header res :content-type "text/html")
</pre>


</li>

<li>
  Method: <strong>(setf body)</strong>
[value (res &lt;response&gt;)]

<pre>
  Set body with normalizing. body must be a list.
</pre>


</li>

<li>
  Method: <strong>set-cookies</strong>
[(res &lt;response&gt;) &amp;optional name]

<pre>
  Get whole of set-cookies plist or the set-cookie value of given name.

Example:
  (set-cookies res)
  ;;=> (:hoge "1")
  (set-cookies res :hoge)
  ;;=> "1"
</pre>


</li>

<li>
  Method: <strong>(setf set-cookies)</strong>
[value (res &lt;response&gt;) &amp;optional name]

<pre>
  Set set-cookies.

Example:
  (setf (set-cookies res) '(:hoge "1"))
  (setf (set-cookies res :hoge) "1")
</pre>


</li>

<li>
  Method: <strong>redirect</strong>
[(res &lt;response&gt;) url &amp;optional (status 302)]

<pre>
  Set headers for redirecting to given url.
</pre>


</li>

<li>
  Method: <strong>finalize</strong>
[(res &lt;response&gt;)]

<pre>
  Return a Clack response list containing three values, status, headers and body.
</pre>


</li>

  </ul>
</div>

</div>

</body>
</html>
