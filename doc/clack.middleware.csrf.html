<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>CLACK.MIDDLEWARE.CSRF</title>
  <link rel="stylesheet" href="./main.css" type="text/css" media="screen, tv, print" charset="UTF-8" />
</head>
<body>

<h1>Clack.Middleware.Csrf - Middleware for easy CSRF protection. </h1><h2>SYNOPSIS</h2><pre><code>;; building application.  
(builder &lt;clack-middleware-csrf&gt; app)  
 
;; in CL-EMB template.  
&lt;form name="test-form" method="post" action="/"&gt;  
&lt;input type="text" name="name" /&gt;  
&lt;%= (csrf-html-tag session) %&gt;  
&lt;input type="submit" value="Send" /&gt;  
&lt;/form&gt; </code></pre><h2>DESCRIPTION</h2><h2>Block behavior</h2><pre><code>(builder  
 &lt;clack-middleware-session&gt;  
 (&lt;clack-middleware-csrf&gt;  
  :block-app #'(lambda (env)  
                 @ignore env  
                 '(302  
                   (:location "http://en.wikipedia.org/wiki/CSRF")  
                   nil)))  
 app) </code></pre><h2>AUTHOR</h2><ul><li>Eitarow Fukamachi (e.arrows@gmail.com)</li></ul><h2>SEE ALSO</h2><ul><li>Clack.Middleware.Session</li></ul>

<h2>EXTERNAL SYMBOLS</h2>

<div class="symbol">
  <ul>

<li>
  Class: <strong>&lt;clack-middleware-csrf&gt;</strong> inherits (&lt;middleware&gt;)

<pre>
  Clack Middleware for easy CSRF protection.
</pre>

<dl>

<dt><strong>block-app</strong> Accessor: block-app</small></dt>


<dt><strong>one-time-p</strong> Accessor: one-time-p</small></dt>


</dl>

</li>

<li>
  Method: <strong>call</strong>
[(this &lt;clack-middleware-csrf&gt;) env]


</li>

<li>
  Function: <strong>csrf-html-tag</strong>
[session]

<pre>
  Return an 'input' tag containing random CSRF token.
Note this has a side-effect, natually. This function stores the generated id into the current session when called.
</pre>


</li>

  </ul>
</div>

</body>
</html>
