<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Clack.Request</title>
  <link rel="stylesheet" href="./main.css" type="text/css" media="screen, tv, print" charset="UTF-8" />
</head>
<body>

<h1>Clack.Request - Portable HTTP Request object for Clack Request. </h1><h2>SYNOPSIS</h2><pre><code>(defun app (env)  
  (let ((req (make-request env)))  
  `(200  
    (:content-type "text/plain")  
    ("Hello, " (query-parameter req "name"))))) </code></pre><h2>DESCRIPTION</h2><p>Clack.Request provides a consistent API for request objects. </p><h2>AUTHOR</h2><ul><li>Eitarow Fukamachi (e.arrows@gmail.com)</li></ul>

<h2>EXTERNAL SYMBOLS</h2>

<div class="symbol">
  <ul>

<li>
  Class: <strong>&lt;request&gt;</strong> inherits (standard-object)

<pre>
  Portable HTTP Request object for Clack Request.
</pre>

<dl>

<dt><strong>request-method</strong> Reader: request-method</small></dt><dd>The HTTP request method.
This must be one of :GET, :HEAD, :OPTIONS, :PUT, :POST, or :DELETE.</dd>


<dt><strong>script-name</strong> Reader: script-name</small></dt><dd>The initial portion of the request URL's path, corresponding to the application.
This may be an empty string if the application corresponds to the server's root URI. If this key is not empty, it must start with a forward slash (/).</dd>


<dt><strong>path-info</strong> Reader: path-info</small></dt><dd>The remainder of the request URL's path.
This may be an empty string if the request URL targets the application root and does no have a trailing slash.</dd>


<dt><strong>server-name</strong> Reader: server-name</small></dt><dd>The resolved server name, or the server IP address.</dd>


<dt><strong>server-port</strong> Reader: server-port</small></dt><dd>The port on which the request is being handled.</dd>


<dt><strong>server-protocol</strong> Reader: server-protocol</small></dt><dd>The version of the protocol the client used to send the request.
Typically this will be something like :HTTP/1.0 or :HTTP/1.1.</dd>


<dt><strong>request-uri</strong> Reader: request-uri</small></dt><dd>The request URI. Must start with '/'.</dd>


<dt><strong>uri-scheme</strong> Reader: uri-scheme</small></dt>


<dt><strong>remote-addr</strong> Reader: remote-addr</small></dt>


<dt><strong>remote-port</strong> Reader: remote-port</small></dt>


<dt><strong>query-string</strong> Reader: query-string</small></dt><dd>The portion of the request URL that follows the '?', if any.</dd>


<dt><strong>raw-body</strong> Reader: raw-body</small></dt>


<dt><strong>content-length</strong> Reader: content-length</small></dt>


<dt><strong>content-type</strong> Reader: content-type</small></dt>


<dt><strong>clack-handler</strong> Reader: clack-handler</small></dt>


<dt><strong>http-referer</strong> Reader: referer</small></dt>


<dt><strong>http-user-agent</strong> Reader: user-agent</small></dt>


<dt><strong>http-cookie</strong></small></dt>


<dt><strong>body-parameters</strong></small></dt>


<dt><strong>query-parameters</strong></small></dt>


<dt><strong>uploads</strong> Accessor: uploads</small></dt>


</dl>

</li>

<li>
  Method: <strong>initialize-instance</strong>
[(this &lt;request&gt;) &amp;key]


</li>

<li>
  Function: <strong>shared-raw-body</strong>
[env]

<pre>
  Returns a shared raw-body, or returns nil if raw-body is
empty. This function modifies REQ to share raw-body among the
instances of <request>.
</pre>


</li>

<li>
  Function: <strong>make-request</strong>
[env]

<pre>
  A synonym for (make-instance '<request> ...).
Make a <request> instance from environment plist. Raw-body of the instance
will be shared, meaning making an instance of <request> doesn't effect
on an original raw-body.
</pre>


</li>

<li>
  Method: <strong>securep</strong>
[(req &lt;request&gt;)]


</li>

<li>
  Method: <strong>cookies</strong>
[(req &lt;request&gt;) &amp;optional name]

<pre>
  Returns cookies as a plist. If optional `name' is specified, returns the value corresponds to it.
</pre>


</li>

<li>
  Method: <strong>body-parameter</strong>
[(req &lt;request&gt;) &amp;optional name]

<pre>
  Return POST parameters as a plist. If optional `name' is specified, returns the value corresponds to it.
</pre>


</li>

<li>
  Method: <strong>query-parameter</strong>
[(req &lt;request&gt;) &amp;optional name]

<pre>
  Returns GET parameters as a plist. If optional `name' is specified, returns the value corresponds to it.
</pre>


</li>

<li>
  Method: <strong>parameter</strong>
[(req &lt;request&gt;) &amp;optional name]

<pre>
  Returns request parameters containing (merged) GET and POST parameters. If optional `name' is specified, returns the value corresponds to it.
</pre>


</li>

  </ul>
</div>

</body>
</html>
