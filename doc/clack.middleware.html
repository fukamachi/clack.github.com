<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Clack.Middleware</title>
  <link rel="stylesheet" href="./main.css" type="text/css" media="screen, tv, print" charset="UTF-8" />
</head>
<body>

<div class="container">

<h1>Clack.Middleware - Base Class for Clack Middleware. </h1><h2>SYNOPSIS</h2><pre><code>(in-package :cl-user)  
(defpackage clack.middleware.example  
  (:use :cl :clack)  
  (:export :&lt;clack-middleware-example&gt;))  
(in-package :clack.middleware.example)  
 
(defclass &lt;clack-middleware-example&gt; (&lt;middleware&gt;) ())  
(defmethod call ((this &lt;clack-middleware-example&gt;) env)  
  ;; pre-processing `env`  
  (let ((res (call-next this env)))  
    ;; post-processing `res`  
    res)) </code></pre><h2>DESCRIPTION</h2><p>Clack.Middleware is the base class to write Clack Middleware. </p><p>All you have to do is to inherit from <code>&lt;middleware&gt;</code> and then implement the callback <code>call</code> method to do the actual work. </p><p>Middleware is similar to ':around' method of CLOS. You can delegate some processes to Application (or next Middleware) to call <code>call-next</code>. </p><h2>AUTHOR</h2><p>  Author: Eitarow Fukamachi (e.arrows@gmail.com) </p><h2>SEE ALSO</h2><ul><li>Clack.Component</li></ul>

<h2>EXTERNAL SYMBOLS</h2>

<div class="symbol">
  <ul>

<li>
  Class: <strong>&lt;middleware&gt;</strong> inherits (&lt;component&gt;)

<pre>
  Class for Clack Middleware.
</pre>

<dl>

<dt><strong>app</strong> Reader: app</small></dt>


</dl>

</li>

<li>
  Method: <strong>call-next</strong>
[(this &lt;middleware&gt;) env]

<pre>
  Call next middleware or application.
</pre>


</li>

<li>
  Method: <strong>wrap</strong>
[(this &lt;middleware&gt;) app-or-middleware]

<pre>
  Compose `this` and the given application or middleware instance into one function.
This function takes a request plist.
</pre>


</li>

  </ul>
</div>

</div>

</body>
</html>
