---
title: 3. Hello, World!
layout: tutorial

previous:
  url: 02-getting-clack.html
  title: 2. Getting Clack
next:
  url: 04-the-environment.html
  title: 4. The Environment
---

<div id="main">

<p>Let's take a closer look at the first small Clack application we introduced in the previous chapter. Here's a slightly "polite" version of the program.</p>

<pre>
(defun app (env)
  (declare (ignore env))
  '(200
    (:content-type "text/plain")
    ("Hello, World!")))

(clack:clackup #'app)
</pre>

<p>You see a Clack application is just a function which takes one argument and returns a list of three elements, which respectively expresses a status code, header fields, and body data, I mean, an HTTP response collectively.</p>

<p>Let's modify this application a little bit to explain the argument <code>env</code>.</p>

<pre>
(defun app (env)
  `(200
    (:content-type "text/plain")
    ("Hello stranger from:"
     ,(getf env :remote-addr))))

(clack:clackup #'app)
</pre>

<p>This application returns web clients' remote addresses. It should be 127.0.0.1 if you are accessing a server running on localhost. The <code>env</code> is a property list containing various information about each HTTP connection associated with an HTTP request.</p>

<p>You can designate a file as HTTP body data. Here's a little bit complicated example using this feature.</p>

<pre>
(defun app (env)
  (cond
    ((string= (getf env :path-info) "/favicon.ico")
     '(200
       (:content-type "image/x-icon")
       #p"/path/to/favicon.ico"))
    ((string= (getf env :path-info) "/")
     '(200
       (:content-type "text/html")
       ("&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hello again&lt;/body&gt;&lt;/html&gt;")))
    (t '(404 (:content-type "text/plain") ("Not found")))))

(clack:clackup #'app)
</pre>

<p>This application returns the file favicon.ico in response to the request whose request path is "/favicon.ico", "Hello again" in response to a request to the root (/), or otherwise "Not found" with a 404 status code.</p>

</div>
